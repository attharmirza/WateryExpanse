<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Metadata -->
  <title>A Watery Expanse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Styles & Fonts -->
  <link rel="stylesheet" href="/style.css">
  <link href="https://fonts.googleapis.com/css?family=Zeyada" rel="stylesheet">

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
  <!-- A-Frame Components-->
  <script src="components/float.js"></script>
  <script src="components/meshMaterialReset.js"></script>
</head>


<body>
  <a-scene fog="type: linear; color:#ffffff; near: 5; far: 50;">
    <!-- Assets -->
    <a-assets>
      <a-asset-item id="dreamboat" src="https://cdn.glitch.com/ebed7c0e-8aba-4b86-a3f6-3e8344cfe655%2FDreamboat_v3_BedOnly.gltf?1536973626593"></a-asset-item>
      <a-asset-item id="lifesaver" src="https://cdn.glitch.com/ebed7c0e-8aba-4b86-a3f6-3e8344cfe655%2FLifesaver_v1.gltf?1536975539318"></a-asset-item>
      
      <img id="Cube-texture" src="https://cdn.glitch.com/ebed7c0e-8aba-4b86-a3f6-3e8344cfe655%2Fwood.jpg?1537306115771">
    </a-assets>

    <!-- Environment & Objects -->
    <a-entity position="-1 0 -10" rotation="0 35 0" floating="width: 2; depth: 4; dampening: 0.6, 0.7, 1; surface: #ocean;">
      <a-entity id="dreamboat-1" gltf-model="#dreamboat" position="0 0 -5" scale="0.5 0.5 0.5" material="shader: standard;" mesh-material-reset>
            <a-entity id="camera2" camera look-controls="enabled: true;" position="0 4 0"></a-entity>
      </a-entity>
    </a-entity>
    
    <a-entity position="3 0 -5" rotation="0 35 0" floating-small="target: #lifesaver-1; surface: #ocean;">
      <a-box id="lifesaver-1" position="0 0 -3" scale="0.5 0.5 0.5"></a-box>
    </a-entity>
    <a-entity position="3 0 -5" rotation="0 35 0" floating-small="target: #lifesaver-2; surface: #ocean;">
      <a-box id="lifesaver-2" position="0 0 -4" scale="0.5 0.5 0.5"></a-box>
    </a-entity>
    <a-entity position="3 0 -5" rotation="0 35 0" floating-small="target: #lifesaver-3; surface: #ocean;">
      <a-box id="lifesaver-3" position="0 0 -5" scale="0.5 0.5 0.5"></a-box>
    </a-entity>


    <!-- Defaults -->
    <a-entity id="camera1" camera look-controls="enabled: false;" position="0 2 0"></a-entity>
    <a-light type="directional" position="2 10 8" intensity="1.0"></a-light>
    <a-sky segments-width="10" segments-height="10"></a-sky>
    <a-ocean id="ocean" color="#FFFFFF" width="100" depth="100" density="30" speed="2" opacity="0.8" amplitude="0.1"></a-ocean>

    <!-- Controllers -->
    <!-- <a-entity hand-controls="left"></a-entity>
    <a-entity hand-controls="right"></a-entity>
    <a-entity daydream-controls></a-entity> -->
  </a-scene>


  <h1>A Watery Expanse</h1>


  <script>
    var scene = document.querySelector('a-scene');
    var camera1 = document.querySelector('#camera1');
    var camera2 = document.querySelector('#camera2');
    
    camera1.setAttribute('camera', 'active', true);
    camera2.setAttribute('camera', 'active', false);


    $('h1').click(function() {
      if (scene.hasLoaded) {
        scene.enterVR();
      } else {
        scene.addEventListener('loaded', scene.enterVR);
      }
    });

    scene.addEventListener('enter-vr', function() {
      var boat = document.querySelector('#dreamboat-1');
      camera1.setAttribute('camera', 'active', false);
      camera2.setAttribute('camera', 'active', true);
      // camera1.setAttribute('look-controls', 'enabled', 'true');
      // camera1.setAttribute('wasd-controls', 'enabled', 'true');
    });

    scene.addEventListener('exit-vr', function() {
      // camera1.setAttribute('look-controls', 'enabled', 'false');
      // camera1.setAttribute('wasd-controls', 'enabled', 'false');
    });
  </script>
</body>

</html>
